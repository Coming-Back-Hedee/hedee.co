{% extends 'base.html.twig' %}

{% block head %} 
    
{% endblock %}

{% block title %}Rembourseo{% endblock %}

{% block main %}
    <main>
        <div class="bloc1">
            <div class="la_presentation">
                <div class="presentation">
                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Architecto, sequi?</p>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam, dolore.</p>
                    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dolore, consequatur?</p>
                </div> <!-- fin class="presentation" -->
            

                <div class="box">
                    <div class="title_box">
                        <h2>Vérifier votre éligibilité</h2>
                        </div> <!-- fin class="title_box" -->
                        <a href="{{ path('enseigne') }}">
                            <div class="btn-group">
                                <button type="button" class="btn btn-primary">Je récupère mon argent</button>
                                <button type="button" class="btn"><span class="glyphicon glyphicon-play"></span></button>
                            </div>
                        </a>
                </div> <!-- fin class="box" -->
            </div><!-- fin class="la_presentation" -->
        </div> <!-- fin class="bloc1" -->
        <hr class="hr_header">

        <div class="bloc2">
            <div class="titre_etapes">
                <h2>3 étapes pour faire votre demande de remboursement de la différence</h2>
            </div> <!-- fin class="titre_etapes" -->

            <div class="les_etapes">
                <div class="etape">
                    <svg version="1.1" id="question" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                         viewBox="0 0 438.533 438.533" style="enable-background:new 0 0 438.533 438.533;"
                        xml:space="preserve">
                        <path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0
                            c-39.781,0-76.47,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267
                            c0,39.78,9.804,76.463,29.407,110.062c19.607,33.592,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407
                            s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.596,29.403-70.284,29.403-110.062
                            C438.533,179.485,428.732,142.795,409.133,109.203z M255.82,356.309c0,2.662-0.862,4.853-2.573,6.563
                            c-1.704,1.711-3.895,2.567-6.557,2.567h-54.823c-2.664,0-4.854-0.856-6.567-2.567c-1.714-1.711-2.57-3.901-2.57-6.563v-54.823
                            c0-2.662,0.855-4.853,2.57-6.563c1.713-1.708,3.903-2.563,6.567-2.563h54.823c2.662,0,4.853,0.855,6.557,2.563
                            c1.711,1.711,2.573,3.901,2.573,6.563V356.309z M325.338,187.574c-2.382,7.043-5.044,12.804-7.994,17.275
                            c-2.949,4.473-7.187,9.042-12.709,13.703c-5.51,4.663-9.891,7.996-13.135,9.998c-3.23,1.995-7.898,4.713-13.982,8.135
                            c-6.283,3.613-11.465,8.326-15.555,14.134c-4.093,5.804-6.139,10.513-6.139,14.126c0,2.67-0.862,4.859-2.574,6.571
                            c-1.707,1.711-3.897,2.566-6.56,2.566h-54.82c-2.664,0-4.854-0.855-6.567-2.566c-1.715-1.712-2.568-3.901-2.568-6.571v-10.279
                            c0-12.752,4.993-24.701,14.987-35.832c9.994-11.136,20.986-19.368,32.979-24.698c9.13-4.186,15.604-8.47,19.41-12.847
                            c3.812-4.377,5.715-10.188,5.715-17.417c0-6.283-3.572-11.897-10.711-16.849c-7.139-4.947-15.27-7.421-24.409-7.421
                            c-9.9,0-18.082,2.285-24.555,6.855c-6.283,4.565-14.465,13.322-24.554,26.263c-1.713,2.286-4.093,3.431-7.139,3.431
                            c-2.284,0-4.093-0.57-5.424-1.709L121.35,145.89c-4.377-3.427-5.138-7.422-2.286-11.991
                            c24.366-40.542,59.672-60.813,105.922-60.813c16.563,0,32.744,3.903,48.541,11.708c15.796,7.801,28.979,18.842,39.546,33.119
                            c10.554,14.272,15.845,29.787,15.845,46.537C328.904,172.824,327.71,180.529,325.338,187.574z"/>
                    </svg>
                    <h3>1. Vérifier votre éligibilité</h3>
                    <p>Tester votre éligibilité en quelques secondes</p>
                </div>

                <div class="etape">
                    <svg version="1.1" id="checked" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 438.533 438.533" style="enable-background:new 0 0 438.533 438.533;"
                        xml:space="preserve">
                        <path d="M409.133,109.203c-19.608-33.592-46.205-60.189-79.798-79.796C295.736,9.801,259.058,0,219.273,0
                            c-39.781,0-76.47,9.801-110.063,29.407c-33.595,19.604-60.192,46.201-79.8,79.796C9.801,142.8,0,179.489,0,219.267
                            c0,39.78,9.804,76.463,29.407,110.062c19.607,33.592,46.204,60.189,79.799,79.798c33.597,19.605,70.283,29.407,110.063,29.407
                            s76.47-9.802,110.065-29.407c33.593-19.602,60.189-46.206,79.795-79.798c19.603-33.596,29.403-70.284,29.403-110.062
                            C438.533,179.485,428.732,142.795,409.133,109.203z M361.445,185.863L206.42,340.889c-3.617,3.62-7.992,5.428-13.134,5.428
                            c-4.948,0-9.229-1.808-12.847-5.428L77.083,237.539c-3.422-3.429-5.137-7.703-5.137-12.847c0-5.328,1.709-9.709,5.137-13.136
                            l25.981-25.693c3.621-3.616,7.898-5.424,12.85-5.424s9.235,1.809,12.85,5.424l64.525,64.523l116.485-116.199
                            c3.617-3.617,7.898-5.426,12.847-5.426c4.945,0,9.233,1.809,12.847,5.426l25.981,25.697c3.432,3.424,5.14,7.801,5.14,13.129
                            C366.589,178.154,364.881,182.437,361.445,185.863z"/>
                    </svg>
                    <h3>2. Valider votre demande</h3>
                    <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Consectetur veniam ex aut ipsa impedit quod!</p>
                </div>

                <div class="etape">
                    <svg version="1.1" id="euro" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 401.987 401.987" style="enable-background:new 0 0 401.987 401.987;"
                        xml:space="preserve">
                        <path d="M345.176,382.016l-9.996-45.392c-0.567-2.669-1.995-4.668-4.284-5.995c-2.475-1.335-4.948-1.52-7.42-0.568l-1.43,0.568
                            l-3.43,0.855c-1.525,0.376-3.285,0.808-5.283,1.283c-1.999,0.476-4.326,0.948-6.995,1.427c-2.655,0.476-5.476,0.907-8.419,1.287
                            c-2.949,0.373-6.132,0.712-9.561,0.999c-3.43,0.281-6.852,0.425-10.281,0.425c-24.174,0-45.922-6.517-65.239-19.555
                            c-19.32-13.042-33.548-30.696-42.683-52.961h110.486c2.098,0,4.001-0.712,5.708-2.143c1.719-1.424,2.766-3.183,3.139-5.284
                            l6.852-31.977c0.574-2.847,0-5.42-1.708-7.706c-1.903-2.286-4.288-3.43-7.139-3.43h-131.04c-0.571-12.942-0.571-22.934,0-29.978
                            h139.325c5.144,0,8.186-2.472,9.137-7.421l6.852-32.548c0.567-2.664-0.089-5.136-1.999-7.422c-1.707-2.284-4.086-3.431-7.132-3.431
                            h-133.62c9.517-21.317,23.791-38.066,42.827-50.248c19.034-12.185,40.542-18.274,64.524-18.274c0.764-0.38,3.569-0.284,8.419,0.286
                            c4.853,0.568,7.618,0.808,8.281,0.712c0.657-0.094,3.142,0.193,7.42,0.855c4.284,0.666,6.427,1,6.427,1l4.996,0.998
                            c1.431,0.288,2.525,0.522,3.285,0.715l1.143,0.284c2.472,0.765,4.75,0.525,6.852-0.711c2.095-1.241,3.429-3.094,4.001-5.568
                            l12.278-45.395c0.568-2.475,0.28-4.759-0.855-6.852c-1.715-2.288-3.621-3.715-5.715-4.284C315.39,2.19,296.92,0,277.51,0
                            c-42.641,0-80.751,12.185-114.347,36.545c-33.595,24.362-56.77,56.532-69.523,96.501H65.663c-2.666,0-4.853,0.855-6.567,2.568
                            c-1.709,1.711-2.568,3.901-2.568,6.567v32.548c0,2.664,0.856,4.854,2.568,6.563c1.715,1.715,3.905,2.568,6.567,2.568h19.13
                            c-0.575,9.139-0.666,19.126-0.288,29.981H65.663c-2.474,0-4.615,0.903-6.423,2.711c-1.807,1.807-2.712,3.949-2.712,6.42v32.264
                            c0,2.478,0.905,4.613,2.712,6.427c1.809,1.808,3.949,2.704,6.423,2.704h27.124c11.991,42.064,34.643,75.52,67.952,100.357
                            c33.311,24.846,72.235,37.261,116.771,37.261c3.62,0,7.282-0.089,10.995-0.287c3.72-0.191,7.187-0.479,10.424-0.855
                            c3.234-0.377,6.424-0.801,9.565-1.28c3.138-0.479,5.995-0.947,8.562-1.431c2.57-0.472,4.997-0.947,7.279-1.42
                            c2.286-0.482,4.332-0.999,6.143-1.574c1.807-0.564,3.323-0.996,4.565-1.276c1.239-0.287,2.238-0.626,2.994-0.999l1.431-0.288
                            c2.095-0.76,3.713-2.142,4.853-4.144C345.464,386.444,345.744,384.299,345.176,382.016z"/>
                    </svg>
                    <h3>3. Nous nous occupons du reste!</h3>
                    <p>Nous effectuons les recherches à votre place et vous alertons de la baisse de prix trouvé</p>
                </div>
            </div> <!-- fin class="les_etapes" -->
        </div> <!-- fin class="bloc2" -->
        <hr class="hr_header">


        <div class="bloc3">
            <div class="titre_pourquoi">
                <h2>Pourquoi R€mbourseo ?</h3>
            </div> <!-- fin class="titre_pourquoi" -->

            <div class="nous_vous">
                <div class="nous">
                    <div class="title_nous">
                        <h4>Nous</h4>
                    </div>

                    <div class="arrow_box">
                        <div class="avantages">
                            <div class="pouce_up">
                                <img src="{{asset('img/accueil/pouce-up.png')}}" alt="" title="">
                            </div>
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="avantages" -->
                        
                        <hr class="hr_header">
                        <div class="avantages">
                            <div class="pouce_up">
                                <img src="{{asset('img/accueil/pouce-up.png')}}" alt="" title="">
                            </div> 
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="avantages" -->
                        <hr class="hr_header">

                        <div class="avantages">
                            <div class="pouce_up">
                                <img src="{{asset('img/accueil/pouce-up.png')}}" alt="" title="">
                            </div>
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="avantages" -->
                    </div> <!-- fin class="arrow_box" -->
                    
                </div> <!-- fin class="nous" -->

                <div class="vous">
                    <div class="title_vous">
                        <h4>Démarches effectuées par vous-même</h4>
                    </div>

                    <div class="arrow_box2">
                        <div class="inconvenients">
                            <div class="pouce_down">
                                <img src="{{asset('img/accueil/pouce-down.png')}}" alt="" title="">
                            </div>
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="inconvenients" -->
                        
                        <hr class="hr_header">
                        <div class="inconvenients">
                            <div class="pouce_down">
                                <img src="{{asset('img/accueil/pouce-down.png')}}" alt="" title="">
                            </div> 
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="inconvenients" -->
                        <hr class="hr_header">

                        <div class="inconvenients">
                            <div class="pouce_down">
                                <img src="{{asset('img/accueil/pouce-down.png')}}" alt="" title="">
                            </div>
                            
                            <div>
                                <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. </p>
                            </div>
                        </div> <!-- fin class="inconvenients" -->
                    </div> <!-- fin class="arrow_box2" -->

                </div> <!-- fin class="vous" -->

            </div> <!-- fin class="nous_vous" -->

        </div> <!-- fin class="bloc3" -->
        <hr class="hr_header">

        <div class="bloc4"> 
            <div class="title_enseignes">
                <h2>Enseignes éligibles</h2>
            </div> <!-- fin class="title_enseignes" -->

            <div class="liste_enseignes">
                <div class="slideshow">
                    <ul>
                        <li><img src="{{asset('img/accueil/alinea.jpg')}}" alt="slide4" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/auchan.png')}}" alt="slide5" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/boulanger.png')}}" alt="slide6" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/but.png')}}" alt="slide4" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/carrefour.jpg')}}" alt="slide5" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/conforama.png')}}" alt="slide6" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/fnac_darty.jpg')}}" alt="slide4" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/leclerc.png')}}" alt="slide5" class="slide" title=""></li>
                        <li><img src="{{asset('img/accueil/casino.png')}}" alt="slide6" class="slide" title=""></li>
                    </ul>
                </div>
            </div> <!-- fin class="liste_enseignes" -->
        </div> <!-- fin class="bloc4" -->
        <hr class="hr_header">

        <div class="bloc5">
            <div class="title_qui">
                <h2>Qui sommes-nous ?</h3>
            </div>

            <div class="qui_sommes_nous">
                <p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Nobis vero, accusantium qui officiis officia possimus? Lorem ipsum dolor sit amet consectetur, adipisicing elit. Autem vitae assumenda quidem laborum nesciunt quod repudiandae corrupti alias corporis, hic debitis dignissimos harum sapiente fugiat qui? Mollitia sed dolores nostrum.</p>
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Dolorum laboriosam non dolore vitae dignissimos est!</p>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus eos mollitia aliquid nam, quo consequuntur?</p>
            </div>
        </div> <!-- fin class="bloc5" -->
        <hr class="hr_header">

        <div class="bloc6"> 
            <div class="title_avis_clients">
                <h2>Avis de nos clients</h3>
            </div> <!-- fin class="title_reseaux" -->
    </main>

{% endblock %} {#fin block main#}


{% block javascript %} 

<script> 
    function verifierCaracteres(event) {
        //console.log(event.keyCode);
        var caracteres = [44, 46, 48, 49, 50, 51, 52 ,53, 54, 55, 56, 57]
        if(caracteres.indexOf(event.keyCode) < 0){
            event.preventDefault;
            return false;
        }
        else{
            return true;
        }
    }
</script>
<script>

	var url_enseigne = "{{ path('admin_utility_enseigne') }}";
    var select = document.getElementById("cat_produit");
        select.onchange = function(){
        if(this.options[select.selectedIndex].value == 0){
            document.getElementById("cat_error").innerText = "Vous devez selectionnez une catégorie";
        }
        else{
            if(document.getElementById("cat_error").innerText != ""){
                document.getElementById("cat_error").innerText = "";
            }
        }
    };
    
    $.ajax({
        dataType: "json",
        url: url_enseigne,
        success: function (data, status){
            var array = []
            data.enseignes.forEach(function(element){
                array.push(element.nomEnseigne)
            })
            $('#select_enseigne').autocomplete({
                source: function( request, response ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
                            response( $.grep( array, function( item ){
                                return matcher.test( item );
                            }) );
                        },
                minLength: 1,
                delay: 100,
            })

            $('#select_enseigne').on('change', function(){               
                this.value = $.ucfirst(this.value)
                $.validator.addMethod(
                    "validation_enseigne",
                    function(value, element, array) {
                    if(array.indexOf(value) < 0)
                        return this.optional(element)
                    else
                        return true
                    },"Nous ne prenons pas encore les demandes pour cette enseigne"
                );
                $('#select_enseigne').rules( "add", {
                    "validation_enseigne": array
                });
                /*if(array.indexOf(this.value) < 0){
                    array.indexOf(this.value)
                    document.getElementById('select_enseigne').style.border = "1px solid red";               
                    document.getElementById("paragraph_id2").innerText = "Nous ne prenons pas encore les demandes pour cette enseigne ";
                    if(this.value == ""){
                        document.getElementById("paragraph_id2").innerText = "Champ requis";
                    }
                    
                    $("#paragraph_id2").show();
                                    
                }
                else{
                    document.getElementById('select_enseigne').setAttribute("aria-invalid", "false");
                    document.getElementById('select_enseigne').style.border = "1px solid lightgrey";        
                    $("#paragraph_id2").hide();                                            
                }*/
            });
        }
    });
 
</script>

<script>
$(document).ready(function() {

    $( function() {
        $( "#datepicker" ).datepicker('destroy')
        $( "#datepicker" ).datepicker({ 
                minDate: -30, maxDate: 0, 
                altField: "#datepicker",
                closeText: 'Fermer',
                prevText: 'Précédent',
                nextText: 'Suivant',
                currentText: 'Aujourd\'hui',
                monthNames: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
                monthNamesShort: ['Janv.', 'Févr.', 'Mars', 'Avril', 'Mai', 'Juin', 'Juil.', 'Août', 'Sept.', 'Oct.', 'Nov.', 'Déc.'],
                dayNames: ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'],
                dayNamesShort: ['Dim.', 'Lun.', 'Mar.', 'Mer.', 'Jeu.', 'Ven.', 'Sam.'],
                dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
                weekHeader: 'Sem.',
                dateFormat: 'dd-mm-yy' 
        });
    });
});

</script>

<script>
    // BLOCAGE DU BOUTON SOUMETTRE SI L'ENSEMBLE DES CHAMPS NE SONT PAS RENSEIGNES
    //console.clear()

    var testinputs = function() {
    var form = $('#form-eligibilite');
    var t=true;
            $('#cat_produit').each(function(i){
                if ( $(this).val()=="" || $(this).val() == "0" ) {
                t=false
                //document.getElementById('soumettre').style.background = "#DDDDDD"; ;
                return false;
                }
            })

            $('#select_enseigne').each(function(i){
                if ( $(this).val()=="" || document.getElementById('select_enseigne').style.border == "1px solid red") {
                t=false
                //document.getElementById('soumettre').style.background = "#DDDDDD"; ;
                return false;
                }
            })

            $('#datepicker').each(function(i){
                if ( $(this).val()=="" ) {
                t=false
                //document.getElementById('soumettre').style.background = "#DDDDDD"; ;
                return false;
                }
            })

            $('#form_prix').each(function(i){
                //console.log(document.getElementById('form_prix').getAttribute('aria-invalid'))
                var input_prix = document.getElementById('form_prix');
                if (input_prix.getAttribute('aria-invalid') == null || input_prix.getAttribute('aria-invalid') == true ) {
                t=false
                //document.getElementById('soumettre').style.background = "#DDDDDD"; 
                return false;
                }
            })


    if (t && form.valid()) {$('#soumettre').prop( "disabled", false ) ;
        document.getElementById('soumettre').style.background = "#00A5C8"; 
    } else {
       $('#soumettre').prop( "disabled", true )
        document.getElementById('soumettre').style.background = "#DDDDDD"; 
    }
    return t;
    //document.getElementById('form-eligibilite').validate().valid()
    } 

    $(document).ready(function () {
        testinputs()
            $('#cat_produit').on("change keyup", function(e){
                testinputs()
            })

            $('#select_enseigne').on("change keyup", function(e){
                testinputs()
            })

            $('#datepicker').on("change keyup", function(e){
                testinputs()
            })

            $('#form_prix').on("change input keyup", function(e){
                this.value = this.value.replace(",",".");
                testinputs()
            })

            /*$('#remise').on("change keyup", function(e){
                testinputs()
            })*/
    }) 
</script>  
<script>
   $(document).ready(function () {
       
        //var pduit = document.getElementById('cat_produit').options[0].value;
        var select = document.getElementById("cat_produit");
         
        select.onchange = function(){
            if(this.options[select.selectedIndex].value == 0){
                $("#paragraph_id1").show()
                document.getElementById('cat_produit').style.border = "1px solid red";
                document.getElementById("paragraph_id1").innerText = "Vous devez selectionnez une catégorie";
            }
            else{
                if(document.getElementById("paragraph_id1").innerText != ""){
                    document.getElementById('cat_produit').style.border = "1px solid lightgrey";
                    document.getElementById("paragraph_id1").innerText = "";
                    $("#paragraph_id1").hide();
                }
            }
        };
    }); 

        $(document).ready(function () {
            
            var val;
            $("#datepicker").change(function () {
                val = this.value
            })
            $("#datepicker").focusout(function () {
                if(val == '') {
                    $("#paragraph_id3").show();
                    document.getElementById('datepicker').style.border = "1px solid red";
                } else {
                    $("#paragraph_id3").hide();
                    document.getElementById('datepicker').style.border = "1px solid lightgrey";
                }
            });

            $("#datepicker").focus(function () {
                document.getElementById('datepicker').style.border = "none";
                $("#paragraph_id3").hide();
            });
        }); 

        $(document).ready(function () {
            
            $("#form_prix").focusout(function () {
                if($('#form_prix').val() == '') {
                    $("#paragraph_id4").show();
                    document.getElementById('form_prix').style.border = "1px solid red";
                    //document.getElementById('Paragraph_id').innerHtml = "Champs requis";
                   //$('#form_prix').focus();
                    return false;
                } else {
                    $("#paragraph_id4").hide();
                    document.getElementById('form_prix').style.border = "1px solid lightgrey";
                }
            });

            $("#form_prix").focus(function () {
                document.getElementById('form_prix').style.border = "none";
                $("#paragraph_id4").hide();
            });
        }); 
</script>

<script>
     // SLIDE ENSEIGNES ELIGIBLES
        $(function(){
        setInterval(function(){
            $(".slideshow ul").animate({marginLeft:-475},800,function(){
                $(this).css({marginLeft:0}).find("li:last").after($(this).find("li:first"));
            })
        }, 3500);
    });

    </script>

{% endblock %} {#fin block javascript#}




